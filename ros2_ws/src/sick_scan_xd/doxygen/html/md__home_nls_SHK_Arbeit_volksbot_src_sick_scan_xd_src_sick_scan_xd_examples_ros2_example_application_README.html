<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>sick_scan: sick_scan_xd ROS-2 example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">sick_scan
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="namespacesick__scan__xd.html">sick_scan_xd</a> ROS-2 example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This project contains a tiny ROS-2 example. It shows how to use <a class="el" href="namespacesick__scan__xd.html">sick_scan_xd</a> messages and services in a ROS-2 application on Linux.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Build</h1>
<p>Run the following steps to build <a class="el" href="namespacesick__scan__xd.html">sick_scan_xd</a>:</p>
<ol type="1">
<li>Clone repositories <a href="https://github.com/SICKAG/libsick_ldmrs">https://github.com/SICKAG/libsick_ldmrs</a> and <a href="https://github.com/SICKAG/sick_scan_xd">https://github.com/SICKAG/sick_scan_xd</a> parrallel to your application folder. For this example we assume that a folder <code>workspace/src</code> exist, incl. a ROS-2 application which will be using <a class="el" href="namespacesick__scan__xd.html">sick_scan_xd</a> services and messages.</li>
</ol>
<div class="fragment"><div class="line">pushd ./workspace/src</div>
<div class="line">git clone https://github.com/SICKAG/libsick_ldmrs.git</div>
<div class="line">git clone -b master https://github.com/SICKAG/sick_scan_xd.git</div>
<div class="line">popd</div>
</div><!-- fragment --><ol type="1">
<li>As an example, we copy folder <code>workspace/src/sick_scan_xd/examples/ros2_example_application</code> to <code>workspace/src/ros2_example_application</code>. Folder <code>workspace/src/ros2_example_application</code> contains our ROS-2 example application. It is just a tiny example, which integrates and uses some <a class="el" href="namespacesick__scan__xd.html">sick_scan_xd</a> messages and services. Please feel free to use this example as a starting point for a <a class="el" href="namespacesick__scan__xd.html">sick_scan_xd</a> integration into your own ROS2 project.</li>
</ol>
<div class="fragment"><div class="line">cp -rf workspace/src/sick_scan_xd/examples/ros2_example_application workspace/src/ros2_example_application</div>
</div><!-- fragment --><p>After this step, folder <code>workspace/src</code> should have the following 3 subfolders: </p><div class="fragment"><div class="line">workspace/src/libsick_ldmrs</div>
<div class="line">workspace/src/sick_scan_xd</div>
<div class="line">workspace/src/ros2_example_application</div>
</div><!-- fragment --><ol type="1">
<li>Build <a class="el" href="namespacesick__scan__xd.html">sick_scan_xd</a> as described in ../../INSTALL-ROS2.md "Build on Linux ROS2":</li>
</ol>
<div class="fragment"><div class="line">cd workspace</div>
<div class="line">source /opt/ros/$ROS_DISTRO/setup.bash # replace $ROS_DISTRO by your ros distro</div>
<div class="line">colcon build --packages-select libsick_ldmrs --event-handlers console_direct+</div>
<div class="line">source ./install/setup.bash</div>
<div class="line">colcon build --packages-select sick_scan_xd --cmake-args &quot; -DROS_VERSION=2&quot; --event-handlers console_direct+</div>
<div class="line">source ./install/setup.bash</div>
</div><!-- fragment --><p>Note: libsick_ldmrs is only required to support LDMRS sensors. If you do not need or want to support LDMRS, you can skip building libsick_ldmrs. To build sick_generic_caller without LDMRS support, run colcon with cmake option <code>-DLDMRS=0</code>: </p><div class="fragment"><div class="line">colcon build --packages-select sick_scan_xd --cmake-args &quot; -DROS_VERSION=2&quot; &quot; -DLDMRS=0&quot; --event-handlers console_direct+</div>
</div><!-- fragment --><p>Note: To build sick_generic_caller without multiScan136/sick_scansegment_xd/picoScan150 support, run colcon with cmake option <code>-DSCANSEGMENT_XD=0</code>: </p><div class="fragment"><div class="line">colcon build --packages-select sick_scan_xd --cmake-args &quot; -DROS_VERSION=2&quot; &quot; -DSCANSEGMENT_XD=0&quot; --event-handlers console_direct+</div>
</div><!-- fragment --><p>cmake flags can be combined. Use flags <code>-DLDMRS=0 -DSCANSEGMENT_XD=0</code> to build without LDMRS and scansegment_xd support: </p><div class="fragment"><div class="line">colcon build --packages-select sick_scan_xd --cmake-args &quot; -DROS_VERSION=2&quot; &quot; -DLDMRS=0&quot; &quot; -DSCANSEGMENT_XD=0&quot; --event-handlers console_direct+</div>
</div><!-- fragment --><ol type="1">
<li>Build the ROS-2 example application:</li>
</ol>
<div class="fragment"><div class="line">colcon build --packages-select sick_scan_ros2_example --event-handlers console_direct+</div>
</div><!-- fragment --><p>Note: ROS-2 package <code>sick_scan_ros2_example</code> uses <a class="el" href="namespacesick__scan__xd.html">sick_scan_xd</a> messages and services. File <a href="package.xml">package.xml</a> contains the following dependency to package <a class="el" href="namespacesick__scan__xd.html">sick_scan_xd</a>: </p><div class="fragment"><div class="line">&lt;depend&gt;sick_scan_xd&lt;/depend&gt;</div>
</div><!-- fragment --><p>File <a href="CMakeLists.txt">CMakeLists.txt</a> contains the following dependencies to package <a class="el" href="namespacesick__scan__xd.html">sick_scan_xd</a>: </p><div class="fragment"><div class="line">find_package(sick_scan_xd REQUIRED)</div>
<div class="line">ament_target_dependencies(</div>
<div class="line">     sick_scan_ros2_example</div>
<div class="line">     &quot;rclcpp&quot;</div>
<div class="line">     &quot;sensor_msgs&quot;</div>
<div class="line">     &quot;std_msgs&quot;</div>
<div class="line">     &quot;sick_scan_xd&quot;</div>
<div class="line">)</div>
</div><!-- fragment --><p>Please include these dependencies in your own ROS-2 project.</p>
<p>File <a href="src/sick_scan_ros2_example.cpp">sick_scan_ros2_example.cpp</a> shows how to include and use <a class="el" href="namespacesick__scan__xd.html">sick_scan_xd</a> messages and services. Please feel free to use this example as a starting point for a <a class="el" href="namespacesick__scan__xd.html">sick_scan_xd</a> integration into your own ROS2 project.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Run the ROS-2 example</h1>
<p>After successful build, the executable <code>sick_scan_ros2_example</code> has been generated in the install folder <code>workspace/install/sick_scan_ros2_example/lib/sick_scan_ros2_example</code>. Run the following steps to test <code>sick_scan_ros2_example</code>:</p>
<ol type="1">
<li><p class="startli">Connect a lidar and run the <a class="el" href="namespacesick__scan__xd.html">sick_scan_xd</a> driver <code>sick_generic_caller</code>:</p>
<p class="startli">``` cd workspace source ./install/setup.bash ros2 run <a class="el" href="namespacesick__scan__xd.html">sick_scan_xd</a> sick_generic_caller ./src/sick_scan_xd/launch/&lt;launchfile&gt; </p><div class="fragment"><div class="line">   See [Run sick_scan_xd driver](../../USAGE.md) for details.</div>
<div class="line"> </div>
<div class="line">2. Run `sick_scan_ros2_example`:</div>
</div><!-- fragment --><p class="startli">ros2 run sick_scan_ros2_example sick_scan_ros2_example &ndash;ros-args -p topics:=sick_tim_7xx ``<code> Note: Depending on your lidar, <a class="el" href="namespacesick__scan__xd.html">sick_scan_xd</a> messages are published on different topics. Use parameter topics, e.g.</code>topics:=sick_tim_7xx<code>for a TiM-7xx lidar. If in doubt, list all <a class="el" href="namespacesick__scan__xd.html">sick_scan_xd</a> topics and services by</code>ros2 topic list<code>and</code>ros2 service list`. </p>
</li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
